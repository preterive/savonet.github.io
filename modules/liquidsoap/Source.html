<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Server.html">
<link rel="next" href="Switch.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class attributes" rel=Appendix href="index_attributes.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="AFrame" rel="Chapter" href="AFrame.html">
<link title="Audio_converter" rel="Chapter" href="Audio_converter.html">
<link title="Clock" rel="Chapter" href="Clock.html">
<link title="Configure" rel="Chapter" href="Configure.html">
<link title="Decoder" rel="Chapter" href="Decoder.html">
<link title="Doc" rel="Chapter" href="Doc.html">
<link title="Dyntools" rel="Chapter" href="Dyntools.html">
<link title="Encoder" rel="Chapter" href="Encoder.html">
<link title="Frame" rel="Chapter" href="Frame.html">
<link title="Generated" rel="Chapter" href="Generated.html">
<link title="Generator" rel="Chapter" href="Generator.html">
<link title="Http" rel="Chapter" href="Http.html">
<link title="IoRing" rel="Chapter" href="IoRing.html">
<link title="JSON" rel="Chapter" href="JSON.html">
<link title="Lang" rel="Chapter" href="Lang.html">
<link title="Lang_types" rel="Chapter" href="Lang_types.html">
<link title="Lang_values" rel="Chapter" href="Lang_values.html">
<link title="MFrame" rel="Chapter" href="MFrame.html">
<link title="Ogg_muxer" rel="Chapter" href="Ogg_muxer.html">
<link title="Output" rel="Chapter" href="Output.html">
<link title="Playlist_parser" rel="Chapter" href="Playlist_parser.html">
<link title="Plug" rel="Chapter" href="Plug.html">
<link title="Request" rel="Chapter" href="Request.html">
<link title="Request_source" rel="Chapter" href="Request_source.html">
<link title="Server" rel="Chapter" href="Server.html">
<link title="Source" rel="Chapter" href="Source.html">
<link title="Switch" rel="Chapter" href="Switch.html">
<link title="Synthesized" rel="Chapter" href="Synthesized.html">
<link title="Tutils" rel="Chapter" href="Tutils.html">
<link title="VFrame" rel="Chapter" href="VFrame.html">
<link title="Video_converter" rel="Chapter" href="Video_converter.html"><link title="Clocks" rel="Section" href="#1_Clocks">
<title>liquidsoap : Source</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Server.html" title="Server">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Switch.html" title="Switch">Next</a>
</div>
<h1>Module <a href="type_Source.html">Source</a></h1>

<pre><span id="MODULESource"><span class="keyword">module</span> Source</span>: <code class="code">sig</code> <a href="Source.html">..</a> <code class="code">end</code></pre><div class="info module top">
<div class="info-desc">
<p>In this module we define the central streaming concepts: sources, active
 sources and clocks.</p>

<p>Sources can produce a stream, if something pulls it.
 Sources can pull streams from other sources (such non-elementary sources
 are called operators).
 But who starts pulling?</p>

<p>Some sources have a noticeable effect, for example outputs.
 Some are indirectly needed by outputs.
 Some are useless, they have no direct or indirect observable effect.
 We only want to pull data from sources that have an effect,
 thereby "animating them". Those sources are called active.</p>

<p>Clocks are in charge of animating active sources.
 Each clock "owns" a number of active sources, and indirectly some
 sources owned by those active sources,
 and controls access to their streams.</p>
</div>
</div>
<hr width="100%">

<pre><span id="TYPEclock_variable"><span class="keyword">type</span> <code class="type"></code>clock_variable</span> </pre>


<pre><code><span id="TYPEsource_t"><span class="keyword">type</span> <code class="type"></code>source_t</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsource_t.Fallible"><span class="constructor">Fallible</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsource_t.Infallible"><span class="constructor">Infallible</span></span></code></td>

</tr></table>

<div class="info ">
<div class="info-desc">
<p>The liveness type of a source indicates whether or not it can
 fail to broadcast.
 A Infallible source never fails; it is always ready.</p>
</div>
</div>


<pre><span id="TYPEsource"><span class="keyword">class</span> <span class="keyword">virtual</span> <a href="Source.source-c.html">source</a></span> : <code class="type">?name:string -> <a href="Frame.html#TYPEcontent_kind">Frame.content_kind</a> -> </code><code class="code">object</code> <a href="Source.source-c.html">..</a> <code class="code">end</code></pre><div class="info">
<p>The <code class="code">source</code> use is to send music frames through the <code class="code">get</code> method.</p>

</div>

<pre><span id="TYPEactive_source"><span class="keyword">class</span> <span class="keyword">virtual</span> <a href="Source.active_source-c.html">active_source</a></span> : <code class="type">?name:string -> <a href="Frame.html#TYPEcontent_kind">Frame.content_kind</a> -> </code><code class="code">object</code> <a href="Source.active_source-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="TYPEoperator"><span class="keyword">class</span> <span class="keyword">virtual</span> <a href="Source.operator-c.html">operator</a></span> : <code class="type">?name:string -> <a href="Frame.html#TYPEcontent_kind">Frame.content_kind</a> -> <a href="Source.source-c.html">source</a> list -> </code><code class="code">object</code> <a href="Source.operator-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="TYPEactive_operator"><span class="keyword">class</span> <span class="keyword">virtual</span> <a href="Source.active_operator-c.html">active_operator</a></span> : <code class="type">?name:string -> <a href="Frame.html#TYPEcontent_kind">Frame.content_kind</a> -> <a href="Source.source-c.html">source</a> list -> </code><code class="code">object</code> <a href="Source.active_operator-c.html">..</a> <code class="code">end</code></pre><div class="info">
<p>Entry-point sources, which need to actively perform some task.</p>

</div>

<pre><span id="VALhas_outputs"><span class="keyword">val</span> has_outputs</span> : <code class="type">unit -> bool</code></pre>
<pre><span id="VALiterate_new_outputs"><span class="keyword">val</span> iterate_new_outputs</span> : <code class="type">(<a href="Source.active_source-c.html">active_source</a> -> unit) -> unit</code></pre><h2 id="1_Clocks">Clocks</h2><p>Tick identifiers are useful (cf. <code class="code">#get_tick</code>) but we don't need much
 more than the guarantee that the next tick is different from the
 current one. Booleans should be OK, in any case an overflow on int
 is not a problem.</p>

<pre><span id="TYPEclock"><span class="keyword">class type</span> <a href="Source.clock-c.html">clock</a></span> = <code class="code">object</code> <a href="Source.clock-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="EXCEPTIONClock_conflict"><span class="keyword">exception</span> Clock_conflict</span> <span class="keyword">of</span> <code class="type">string * string</code></pre>

<pre><span id="EXCEPTIONClock_loop"><span class="keyword">exception</span> Clock_loop</span> <span class="keyword">of</span> <code class="type">string * string</code></pre>

<pre><span id="MODULEClock_variables"><span class="keyword">module</span> <a href="Source.Clock_variables.html">Clock_variables</a></span>: <code class="code">sig</code> <a href="Source.Clock_variables.html">..</a> <code class="code">end</code></pre></body></html>